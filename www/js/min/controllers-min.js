angular.module("starter.controllers",[]).controller("AppCtrl",function(o,t,e){o.loginData={},t.fromTemplateUrl("templates/login.html",{scope:o}).then(function(t){o.modal=t}),o.closeLogin=function(){o.modal.hide()},o.login=function(){o.modal.show()},o.doLogin=function(){console.log("Doing login",o.loginData),e(function(){o.closeLogin()},1e3)}}).controller("AJAXCtrl",function(o,t){o.doRefresh=function(){t.get("http://www.the-hybrid.co.uk/api.php?request=get_lore_posts").then(function(o){console.log("Success",o),drawLore(o.data)},function(o){console.log("ERR",o)}),o.$broadcast("scroll.refreshComplete")}}).controller("HybridCtrl",function(o,t,e,n){var i="<ion-popover-view><ion-header-bar><h1 class='title'>Popover</h1></ion-header-bar><ion-content>Wassss up!</ion-content></ion-popover-view>";o.popover=t.fromTemplate(i,{$scope:o}),o.openPopover=function(t){e.retain(),o.popover.show(t)},console.log("Fired"),n(function(){e.release()},5e3)}).controller("LoginCtrl",function(o,t){o.data={},o.showPopup=function(o,e){t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var n="d55194bead47cbdd71591b73f6465e53",i="admin@the-hybrid.co.uk",a=encodeURIComponent(n),l=encodeURIComponent(i);t({method:"POST",url:"http://www.the-hybrid.co.uk/api.php",data:$.param({request:"get_user_data",username:l,password:a}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(o,t,e,n){console.log(n.data),console.warn(o)}),t({method:"POST",url:"http://www.jamesrwilliams.co.uk/hybrid/api.php",data:$.param({request:"user_data",username:l,password:a}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(o,t,e,n){console.log("James' "+o)})}}).controller("MapCtrl",function(o,t,e,n){var i;o.claim=function(){o.claimDialog()},o.claimDialog=function(){var n=t.show({template:'<p>The fate of humanity is in your hand</p><button ng-click="vampire()" ng-value="1" class="button button-block">Vampire</button"><button ng-click="werewolf()" class="button button-block">Werewolf</button><button class="button button-block" ng-click="ghost()">Ghost</button><button ng-click="zombie()" class="button button-block">Zombie</button>',title:"Choose your side",scope:o,buttons:[{text:"Cancel",type:"button-positive"}]});n.then(function(o){console.log("Tapped!",o)}),e(function(){n.close()},5e3)},o.showAlert=function(){var o=t.alert({title:"Infection Requires an Internet Connection",template:"It seems The Hybrid Companion cannot connect to the game servers. Please try again later.",animation:"fade-in"})},o.vampire=function(o){claim_location(1,i)},o.werewolf=function(o){claim_location(2,i)},o.ghost=function(o){claim_location(3,i)},o.zombie=function(o){claim_location(4,i)},o.sendUpdate=function(){n({method:"POST",url:"http://www.jamesrwilliams.co.uk/hybrid/api.php",data:$.param({request:"update_game",data:update_game}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(o,t,e,n){console.log("James' "+o)})},n.get("http://www.jamesrwilliams.co.uk/hybrid/api.php?request=fetch_game").then(function(t){o.showAlert();var e=new Object;i=t.data,i=i.replace(/\\"/g,'"'),i=i.substring(1,i.length-1),i=JSON.parse(i),initialise(i)},function(t){o.showAlert()})}).controller("PlaylistsCtrl",function(o){o.playlists=[{title:"Zombies",id:1},{title:"70px",id:2},{title:"Dubstep",id:3},{title:"Indie",id:4},{title:"Rap",id:5},{title:"Cowbell",id:6}]}).controller("PlaylistCtrl",function(o,t){});