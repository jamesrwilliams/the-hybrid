angular.module("starter.controllers",[]).controller("AppCtrl",function(t,e,o){t.loginData={},e.fromTemplateUrl("templates/login.html",{scope:t}).then(function(e){t.modal=e}),t.closeLogin=function(){t.modal.hide()},t.login=function(){t.modal.show()},t.doLogin=function(){console.log("Doing login",t.loginData),o(function(){t.closeLogin()},1e3)}}).controller("AJAXCtrl",function(t,e){t.doRefresh=function(){e.get("http://www.the-hybrid.co.uk/api.php?request=get_lore_posts").then(function(t){console.log("Success",t),drawLore(t.data)},function(t){console.log("ERR",t)}),t.$broadcast("scroll.refreshComplete")}}).controller("HybridCtrl",function(t,e,o,n){}).controller("PlayerCtrl",function(t,e){t.playerRefresh=function(){t.$broadcast("scroll.refreshComplete"),t.getPlayerData()},t.getPlayerData=function(){e({method:"GET",url:"./js/player.json"}).success(function(t,e,o,n){console.log(t),$("#player_id").text("Player ID: "+t.player.player_id),$("#player_health").text(t.player.health),$("#player_xp").text(t.player.xp.xp_general),$("#vampire_kills").text(t.player.xp.xp_vampire),$("#werewolf_kills").text(t.player.xp.xp_werewolf),$("#ghost_kills").text(t.player.xp.xp_ghosts),$("#zombie_kills").text(t.player.xp.xp_zombie)})},t.getPlayerData()}).controller("LoginCtrl",function(t,e){t.data={},t.showPopup=function(t,o){e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var n=$("#password").val(),l=$("#username").val(),a=encodeURIComponent(n),i=encodeURIComponent(l);e({method:"POST",url:"http://www.the-hybrid.co.uk/api.php",data:$.param({request:"get_player_data",username:l,password:a}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t,e,o,n){console.log(n),console.warn(t)})}}).controller("MapCtrl",function(t,e,o,n){var l;t.claim=function(){t.claimDialog()},t.claimDialog=function(){var n=e.show({template:'<p>The fate of humanity is in your hand</p><button ng-click="vampire()" ng-value="1" class="button button-block">Vampire</button"><button ng-click="werewolf()" class="button button-block">Werewolf</button><button class="button button-block" ng-click="ghost()">Ghost</button><button ng-click="zombie()" class="button button-block">Zombie</button>',title:"Choose your side",scope:t,buttons:[{text:"Cancel",type:"button-positive"}]});n.then(function(t){console.log("Tapped!",t)}),o(function(){n.close()},5e3)},t.showAlert=function(){var t=e.alert({title:"Infection Requires an Internet Connection",template:"It seems The Hybrid Companion cannot connect to the game servers. Please try again later.",animation:"fade-in"})},t.vampire=function(t){claim_location(1,l)},t.werewolf=function(t){claim_location(2,l)},t.ghost=function(t){claim_location(3,l)},t.zombie=function(t){claim_location(4,l)},t.sendUpdate=function(){n({method:"POST",url:"http://www.jamesrwilliams.co.uk/hybrid/api.php",data:$.param({request:"update_game",data:update_game}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t,e,o,n){console.log("James' "+t)})},n.get("http://www.jamesrwilliams.co.uk/hybrid/api.php?request=fetch_game").then(function(e){t.showAlert();var o=new Object;l=e.data,l=l.replace(/\\"/g,'"'),l=l.substring(1,l.length-1),l=JSON.parse(l),initialise(l)},function(e){t.showAlert()})}).controller("PlaylistsCtrl",function(t){t.playlists=[{title:"Zombies",id:1},{title:"70px",id:2},{title:"Dubstep",id:3},{title:"Indie",id:4},{title:"Rap",id:5},{title:"Cowbell",id:6}]}).controller("PlaylistCtrl",function(t,e){});