function login(){console.log("Login Started");var e=$(".login #username").val(),t=$(".login #password").val();console.log("Username: "+e),console.log("Password: "+$.md5(t))}function drawLore(e){console.log(e),$.each(e,function(e,t){$("#lore_output").append("<a class='item'><h2>"+t.title+"</h2><p>"+t.text+"</p>")})}function getLoreData(){$("#lore_output").text("Fetching Data");var e=new XMLHttpRequest;e.open("GET","http://www.the-hybrid.co.uk/api.php?request=get_lore_posts",!0),e.onload=function(){if(e.status>=200&&e.status<400){var t=JSON.parse(e.responseText);console.log(t),setData(t)}else $("#lore_output").text("Error Fetching Data")},e.onerror=function(){$("#lore_output").text("Error Connecting To Server")},e.send()}function setData(e){$(document).ready(function(){$("#lore_output").text(e)})}function drawHex(e,t,l){var o=1e-4,i=[[t+1*o,l+0],[t+3*o,l+0],[t+4*o,l+1*o*2.7],[t+3*o,l+2*o*2.7],[t+1*o,l+2*o*2.7],[t+0*o,l+1*o*2.7]];return i}function isNumber(e){return e==parseFloat(e)}function isEven(e){return isNumber(e)&&e%2===0}function isOdd(e){return isNumber(e)&&Math.abs(e)%2===1}function locationError(){output.innerHTML=output.innerHTML+"<p>Geolocation Fetch Fail</p>"}function drawFences(e,t){var l=game.setup.size,o=10,s=10,a=300,r=3e-4,n=27e-5,y="#48d1af",p=3,g=.1,c="#FFFFFF",f=0;for(count=0;count<l;count++)if(isEven(count))for(i=0;o>i;i++){var u=0*i,m=i*-54e-5;polygons.push(map.drawPolygon({paths:drawHex(1,e-r*count,t-m),strokeColor:y,strokeOpacity:g,strokeWeight:p,fillColor:c,fillOpacity:f}))}else if(isOdd(count))for(i=0;o-1>i;i++){var u=0*i,m=i*-54e-5;polygons.push(map.drawPolygon({paths:drawHex(1,e-r*count,t+n-m),strokeColor:y,strokeOpacity:g,strokeWeight:p,fillColor:c,fillOpacity:f}))}}function init_geo(){navigator.geolocation.getCurrentPosition(locationSuccess,locationError),map.removeMarkers()}function initialise(){if(output=document.getElementById("output"),"geolocation"in navigator){map=new GMaps({zoom:17,div:"#map-canvas",lat:51.88718,lng:-2.088669,disableDefaultUI:!0});var e=[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{hue:"#ff0000"},{lightness:"100"}]},{featureType:"administrative.neighborhood",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{lightness:"7"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#48d1af"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#66b0ff"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.highway",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.arterial",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{lightness:"100"},{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text",stylers:[{visibility:"on"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{lightness:"100"},{visibility:"on"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"transit.station.bus",elementType:"labels.text.fill",stylers:[{hue:"#ff0000"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#4aceae"},{lightness:17}]},{featureType:"water",elementType:"geometry.fill",stylers:[{lightness:"100"}]}];for(map.setOptions({styles:e}),drawFences(51.88886,-2.091646),i=0;i<polygons.length;i++)isOdd(i)?game.grid[i]="3":game.grid[i]="4",console.log("Grid: "+i+" - "+game.grid[i]),"1"===game.grid[i]?(console.log("Vampire"),polygons[i].setOptions({fillColor:game.style.vampire,fillOpacity:game.style.active.fillOpacity})):"2"==game.grid[i]?(console.log("Werewolf"),polygons[i].setOptions({fillColor:game.style.werewolf,fillOpacity:game.style.active.fillOpacity})):"3"==game.grid[i]?polygons[i].setOptions({fillColor:game.style.ghost,fillOpacity:game.style.active.fillOpacity}):"4"==game.grid[i]?polygons[i].setOptions({fillColor:game.style.zombie,fillOpacity:game.style.active.fillOpacity}):polygons[i].setOptions({fillColor:"#FFFFFF",fillOpacity:1});init_geo()}}var test_lat=51.887761,test_lng=-2.088182,zombie="#4e8c03",map,i,output,test_marker,polygons=[],game=new Object;game.setup=new Object,game.style=new Object,game.grid=new Object,game.style.active=new Object,game.style.grid=new Object,game.origin=new Object,game.origin.lat="51.889378",game.origin.lng="-2.092853",game.setup.size=13,game.style.vampire="#7C0107",game.style.werewolf="#231552",game.style.ghost="#35D1ED",game.style.zombie="4E8D03",game.style.ots="#FFFFFF",game.style.grid.strokeColour="#48d1af",game.style.grid.strokeWeight=2.5,game.style.grid.strokeOpacity=1,game.style.grid.fillColour="#FFFFFF",game.style.grid.fillOpactiy=.5,game.style.active.fillColor="#48d1af",game.style.active.fillOpacity=.1;var json_data=JSON.stringify(game),locationSuccess=function(e){var t=map.addMarker({lat:e.coords.latitude,lng:e.coords.longitude,title:"You",click:function(e){output.innerHTML=output.innerHTML+"<p>This is your location</p>"}});test_marker=map.addMarker({lat:test_lat,lng:test_lng,title:"Test",click:function(e){output.innerHTML=output.innerHTML+"<p>This is the Test Marker </p>"}});var l=0;for(i=0;i<polygons.length;i++)(map.checkGeofence(test_lat,test_lng,polygons[i])||map.checkGeofence(e.coords.latitude,e.coords.longitude,polygons[i]))&&(polygons[i].setOptions({fillColor:game.style.active.fillColor,fillOpacity:game.style.active.fillOpacity}),l++);output.innerHTML=output.innerHTML+"<p>Markers in: "+l+" of "+polygons.length+" grids. <br /></p>"};